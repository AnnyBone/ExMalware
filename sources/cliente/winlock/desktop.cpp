#include "windows.h"
#include "desktop.h"
#include <iostream>



void DesktopEnv::_createHiddenDesktop(DesktopLocker* deskPtr)
{
	DWORD ThreadId;
	ThreadId = GetCurrentThreadId();
	ZeroMemory(deskPtr, sizeof(DesktopLocker));

	deskPtr->originalDesktop = GetThreadDesktop(ThreadId);
	deskPtr->lockDesktop = CreateDesktopW(L"[LockPC-LockedDesktop]", NULL, NULL, 0, GENERIC_ALL, 0);

	if (deskPtr->lockDesktop == NULL)
	{
		MessageBoxW(0, L"Could not create a desktop", L"Error", 16);
	}



}
